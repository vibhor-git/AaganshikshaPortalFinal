{% extends 'base.html' %} {% block title %}Aaganshiksha - Home{% endblock %} {%
block content %}
<!-- Hero Section -->
<section class="hero-section">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-lg-6 animate__animated animate__fadeInLeft">
        <h1 class="hero-title mb-4">Welcome to Aaganshiksha</h1>
        <p class="hero-subtitle mb-4">
          A digital platform that transforms early childhood education by
          connecting Aganwadi centers with students, parents, and educators.
        </p>
        <div class="d-flex gap-3">
          <a href="{{ url_for('home.about') }}" class="btn btn-light btn-lg"
            >Learn More</a
          >
          {% if not current_user.is_authenticated %}
          <a
            href="{{ url_for('auth.login') }}"
            class="btn btn-outline-light btn-lg"
            >Login</a
          >
          {% endif %}
        </div>
      </div>
      <div
        class="col-lg-6 d-none d-lg-block animate__animated animate__fadeInRight"
      >
        <img
          src="{{ url_for('static', filename='imgHome.jpeg') }}"
          class="d-block w-100"
          alt="Children in classroom"
          style="height: 500px; object-fit: cover"
        />
      </div>
    </div>
  </div>
</section>

<!-- Carousel Section -->
<section class="py-5">
  <div class="container">
    <div
      id="homeCarousel"
      class="carousel slide rounded-4 overflow-hidden shadow-lg"
      data-bs-ride="carousel"
    >
      <div class="carousel-indicators">
        <button
          type="button"
          data-bs-target="#homeCarousel"
          data-bs-slide-to="0"
          class="active"
          aria-current="true"
          aria-label="Slide 1"
        ></button>
        <button
          type="button"
          data-bs-target="#homeCarousel"
          data-bs-slide-to="1"
          aria-label="Slide 2"
        ></button>
        <button
          type="button"
          data-bs-target="#homeCarousel"
          data-bs-slide-to="2"
          aria-label="Slide 3"
        ></button>
      </div>
      <div class="carousel-inner">
        <div class="carousel-item active">
          <img
            src="{{ url_for('static', filename='img1.jpeg') }}"
            class="d-block w-100"
            alt="Children in classroom"
            style="height: 500px; object-fit: cover"
          />

          <!-- Semi-transparent overlay on the entire image -->
          <div
            style="
              position: absolute;
              top: 0;
              left: 0;
              width: 100%;
              height: 100%;
              background-color: rgba(0, 0, 0, 0.4);
            "
          ></div>

          <!-- Caption with solid background -->
          <div
            class="carousel-caption"
            style="
              background-color: rgba(0, 0, 0, 0.8);
              border-radius: 10px;
              padding: 30px;
              bottom: 80px;
              left: 50%;
              transform: translateX(-50%);
              width: 90%;
              max-width: 800px;
              box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            "
          >
            <h2
              class="fw-bold display-4 mb-3 text-white"
              style="text-shadow: 3px 3px 6px #000000; letter-spacing: 1px"
            >
              QUALITY EARLY EDUCATION
            </h2>
            <p
              class="lead fs-4 fw-semibold mb-0"
              style="text-shadow: 1px 1px 3px #000000"
            >
              Providing the foundation for lifelong learning and development
            </p>
          </div>
        </div>
        <div class="carousel-item">
          <img
            src="{{ url_for('static', filename='img2.jpg') }}"
            class="d-block w-100"
            alt="Children in classroom"
            style="height: 500px; object-fit: cover"
          />
          <!-- Semi-transparent overlay on the entire image -->
          <div
            style="
              position: absolute;
              top: 0;
              left: 0;
              width: 100%;
              height: 100%;
              background-color: rgba(0, 0, 0, 0.4);
            "
          ></div>

          <!-- Caption with solid background -->
          <div
            class="carousel-caption"
            style="
              background-color: rgba(0, 0, 0, 0.8);
              border-radius: 10px;
              padding: 30px;
              bottom: 80px;
              left: 50%;
              transform: translateX(-50%);
              width: 90%;
              max-width: 800px;
              box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            "
          >
            <h2
              class="fw-bold display-4 mb-3 text-white"
              style="text-shadow: 3px 3px 6px #000000; letter-spacing: 1px"
            >
              NUTRITION & WELLNESS
            </h2>
            <p
              class="lead fs-4 fw-semibold mb-0"
              style="text-shadow: 1px 1px 3px #000000"
            >
              Ensuring healthy growth through balanced nutrition and care
            </p>
          </div>
        </div>
        <div class="carousel-item">
          <img
            src="{{ url_for('static', filename='img3.jpg') }}"
            class="d-block w-100"
            alt="Children in classroom"
            style="height: 500px; object-fit: cover"
          />
          <!-- Semi-transparent overlay on the entire image -->
          <div
            style="
              position: absolute;
              top: 0;
              left: 0;
              width: 100%;
              height: 100%;
              background-color: rgba(0, 0, 0, 0.4);
            "
          ></div>

          <!-- Caption with solid background -->
          <div
            class="carousel-caption"
            style="
              background-color: rgba(0, 0, 0, 0.8);
              border-radius: 10px;
              padding: 30px;
              bottom: 80px;
              left: 50%;
              transform: translateX(-50%);
              width: 90%;
              max-width: 800px;
              box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            "
          >
            <h2
              class="fw-bold display-4 mb-3 text-white"
              style="text-shadow: 3px 3px 6px #000000; letter-spacing: 1px"
            >
              ENGAGING ACTIVITIES
            </h2>
            <p
              class="lead fs-4 fw-semibold mb-0"
              style="text-shadow: 1px 1px 3px #000000"
            >
              Fun and educational activities designed for holistic development
            </p>
          </div>
        </div>
      </div>
      <button
        class="carousel-control-prev"
        type="button"
        data-bs-target="#homeCarousel"
        data-bs-slide="prev"
      >
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
      </button>
      <button
        class="carousel-control-next"
        type="button"
        data-bs-target="#homeCarousel"
        data-bs-slide="next"
      >
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
      </button>
    </div>
  </div>
</section>

<!-- Features Section -->
<section class="py-5">
  <div class="container">
    <div class="row justify-content-center mb-5">
      <div class="col-lg-7 text-center">
        <h2 class="fw-bold mb-3">Why Choose Aaganshiksha?</h2>
        <p class="text-muted">
          Our platform offers comprehensive tools for managing Aganwadi centers
          with focus on quality education and efficient administration.
        </p>
      </div>
    </div>

    <div class="row g-4">
      <div class="col-md-4 animate__animated animate__fadeInUp">
        <div class="feature-card text-center">
          <div
            class="feature-icon bg-soft-primary rounded-circle p-3 mx-auto"
            style="width: 80px; height: 80px"
          >
            <i class="fas fa-clipboard-check fa-2x text-primary"></i>
          </div>
          <h4 class="mt-4 mb-3">Attendance Tracking</h4>
          <p class="text-muted">
            Easily track student attendance with digital records and generate
            comprehensive reports.
          </p>
        </div>
      </div>

      <div
        class="col-md-4 animate__animated animate__fadeInUp"
        style="animation-delay: 0.2s"
      >
        <div class="feature-card text-center">
          <div
            class="feature-icon bg-soft-success rounded-circle p-3 mx-auto"
            style="width: 80px; height: 80px"
          >
            <i class="fas fa-apple-alt fa-2x text-success"></i>
          </div>
          <h4 class="mt-4 mb-3">Nutrition Guidance</h4>
          <p class="text-muted">
            Access expert nutrition tips and guidelines to ensure children's
            healthy development.
          </p>
        </div>
      </div>

      <div
        class="col-md-4 animate__animated animate__fadeInUp"
        style="animation-delay: 0.4s"
      >
        <div class="feature-card text-center">
          <div
            class="feature-icon bg-soft-info rounded-circle p-3 mx-auto"
            style="width: 80px; height: 80px"
          >
            <i class="fas fa-puzzle-piece fa-2x text-info"></i>
          </div>
          <h4 class="mt-4 mb-3">Learning Activities</h4>
          <p class="text-muted">
            Browse and implement age-appropriate activities that promote
            holistic development.
          </p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- About Us Section -->
<section class="py-5 bg-light" id="about-section">
  <div class="container">
    <div class="row align-items-center g-5">
      <div class="col-lg-6 animate__animated animate__fadeInLeft">
        <h2 class="section-title mb-4">About Aaganshiksha</h2>
        <p class="lead text-primary mb-3">
          Transforming early childhood education through digital integration
        </p>
        <p class="mb-4">
          Aaganshiksha website ka maqsad Aganwadi centres se jude students ke
          parents, teachers aur admin ke liye ek centralized digital platform
          provide karna hai. We aim to enhance the quality of early childhood
          education by providing tools for better administration, communication,
          and monitoring.
        </p>

        <div class="row g-4 mt-2">
          <div class="col-md-6">
            <div class="d-flex">
              <div class="me-3">
                <span class="badge bg-primary rounded-circle p-3">
                  <i class="fas fa-child"></i>
                </span>
              </div>
              <div>
                <h5 class="mb-2">Child-Centric</h5>
                <p class="text-muted small">
                  Focusing on child development and well-being
                </p>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="d-flex">
              <div class="me-3">
                <span class="badge bg-info rounded-circle p-3">
                  <i class="fas fa-users"></i>
                </span>
              </div>
              <div>
                <h5 class="mb-2">Community</h5>
                <p class="text-muted small">
                  Building strong community connections
                </p>
              </div>
            </div>
          </div>
        </div>

        <a href="{{ url_for('home.about') }}" class="btn btn-primary mt-4"
          >Read More About Us</a
        >
      </div>
      <div class="col-lg-6 animate__animated animate__fadeInRight">
        <div class="card border-0 shadow-lg rounded-4 overflow-hidden">
          <div class="card-body p-4">
            <div class="row g-4">
              <div class="col-6">
                <div class="card h-100 bg-soft-primary border-0 rounded-4">
                  <div class="card-body p-4">
                    <h5 class="text-primary mb-3">Our Mission</h5>
                    <p class="mb-0 small">
                      To empower Aganwadi centers through digital
                      transformation, ensuring quality early childhood education
                      and care.
                    </p>
                  </div>
                </div>
              </div>
              <div class="col-6">
                <div class="card h-100 bg-soft-info border-0 rounded-4">
                  <div class="card-body p-4">
                    <h5 class="text-info mb-3">Our Vision</h5>
                    <p class="mb-0 small">
                      Creating a network of digitally connected Aganwadi centers
                      that provide excellence in early childhood development
                      across India.
                    </p>
                  </div>
                </div>
              </div>
              <div class="col-12">
                <div class="card h-100 bg-white border-0 rounded-4 shadow-sm">
                  <div class="card-body p-4">
                    <h5 class="mb-3">Our Values</h5>
                    <div class="row">
                      <div class="col-6">
                        <ul class="list-unstyled mb-0">
                          <li class="mb-2">
                            <i
                              class="fas fa-check-circle text-success me-2"
                            ></i>
                            Child-Centric Approach
                          </li>
                          <li class="mb-0">
                            <i
                              class="fas fa-check-circle text-success me-2"
                            ></i>
                            Community Engagement
                          </li>
                        </ul>
                      </div>
                      <div class="col-6">
                        <ul class="list-unstyled mb-0">
                          <li class="mb-2">
                            <i
                              class="fas fa-check-circle text-success me-2"
                            ></i>
                            Digital Inclusion
                          </li>
                          <li class="mb-0">
                            <i
                              class="fas fa-check-circle text-success me-2"
                            ></i>
                            Transparency
                          </li>
                        </ul>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Nutrition Tips Section -->
<section class="py-5" id="nutrition-section">
  <div class="container">
    <div class="text-center mb-5">
      <h2 class="section-title text-center">Nutrition Tips</h2>
      <p class="text-muted">
        Promoting balanced nutrition and healthy habits for early childhood
        development
      </p>
    </div>

    <div class="row g-4" id="nutrition-tips-container">
      {% if nutrition_tips %} 
        {% for tip in nutrition_tips[:6] %}
        <div
          class="col-lg-4 col-md-6 animate__animated animate__fadeInUp nutrition-tip-card"
          style="animation-delay: {{ loop.index * 0.1 }}s;"
        >
          <div class="card h-100 border-0 shadow-sm hover-lift">
            <div class="card-body p-4">
              <div class="d-flex align-items-center mb-3">
                <span class="badge bg-soft-success p-2 rounded-circle me-3">
                  <i class="fas fa-leaf text-success"></i>
                </span>
                <h5 class="card-title mb-0">{{ tip.title }}</h5>
              </div>
              <p class="card-text text-muted">{{ tip.content }}</p>
            </div>
            <div class="card-footer bg-transparent border-0 pb-3 px-4">
              <div class="d-flex justify-content-between align-items-center">
                <small class="text-muted"
                  ><i class="far fa-calendar me-1"></i> {{
                  tip.created_at.strftime('%d %b, %Y') }}</small
                >
                <a href="#" class="text-primary small show-nutrition-tip" data-tip-id="{{ tip.id }}"
                  >Read more <i class="fas fa-arrow-right ms-1"></i
                ></a>
              </div>
            </div>
          </div>
        </div>
        {% endfor %}

        {% for tip in nutrition_tips[6:] %}
        <div
          class="col-lg-4 col-md-6 animate__animated animate__fadeInUp nutrition-tip-card d-none"
          style="animation-delay: {{ loop.index * 0.1 }}s;"
        >
          <div class="card h-100 border-0 shadow-sm hover-lift">
            <div class="card-body p-4">
              <div class="d-flex align-items-center mb-3">
                <span class="badge bg-soft-success p-2 rounded-circle me-3">
                  <i class="fas fa-leaf text-success"></i>
                </span>
                <h5 class="card-title mb-0">{{ tip.title }}</h5>
              </div>
              <p class="card-text text-muted">{{ tip.content }}</p>
            </div>
            <div class="card-footer bg-transparent border-0 pb-3 px-4">
              <div class="d-flex justify-content-between align-items-center">
                <small class="text-muted"
                  ><i class="far fa-calendar me-1"></i> {{
                  tip.created_at.strftime('%d %b, %Y') }}</small
                >
                <a href="#" class="text-primary small show-nutrition-tip" data-tip-id="{{ tip.id }}"
                  >Read more <i class="fas fa-arrow-right ms-1"></i
                ></a>
              </div>
            </div>
          </div>
        </div>
        {% endfor %}
      {% else %}
      <div class="col-12">
        <div
          class="card border-0 shadow-sm p-4 text-center rounded-4 bg-soft-primary"
        >
          <div class="card-body py-5">
            <i class="fas fa-apple-alt fa-3x text-primary mb-3"></i>
            <h5>No nutrition tips available at the moment</h5>
            <p class="text-muted mb-0">
              Check back soon for helpful nutrition guidelines and tips!
            </p>
          </div>
        </div>
      </div>
      {% endif %}
    </div>

    {% if total_nutrition_tips > 6 %}
    <div class="text-center mt-5">
      <button id="load-more-tips" class="btn btn-outline-primary px-4 py-2 rounded-pill">
        Show More <i class="fas fa-angle-down ms-2"></i>
      </button>
    </div>
    {% endif %}
  </div>
</section>

<!-- Activity Section -->
<section class="py-5 bg-light" id="activity-section">
  <div class="container">
    <div class="text-center mb-5">
      <h2 class="section-title text-center">Learning Activities</h2>
      <p class="text-muted">
        Engaging activities that promote cognitive, social, and physical
        development
      </p>
    </div>

    <div class="row g-4" id="activities-container">
      {% if activities %} 
        {% for activity in activities[:6] %}
        <div
          class="col-lg-4 col-md-6 animate__animated animate__fadeInUp activity-card"
          style="animation-delay: {{ loop.index * 0.1 }}s;"
        >
          <div class="card h-100 border-0 shadow-sm hover-lift">
            <div class="card-body p-4">
              <div class="mb-3">
                <span class="badge bg-primary px-3 py-2 rounded-pill small"
                  >{{ activity.date.strftime('%d %b, %Y') }}</span
                >
              </div>
              <h5 class="card-title mb-3">{{ activity.title }}</h5>
              <p class="card-text text-muted">{{ activity.description }}</p>
            </div>
            <div class="card-footer bg-transparent border-0 pb-3 px-4">
              <a href="#" class="btn btn-sm btn-soft-primary px-3 rounded-pill show-activity" data-activity-id="{{ activity.id }}"
                >Learn More</a
              >
            </div>
          </div>
        </div>
        {% endfor %}

        {% for activity in activities[6:] %}
        <div
          class="col-lg-4 col-md-6 animate__animated animate__fadeInUp activity-card d-none"
          style="animation-delay: {{ loop.index * 0.1 }}s;"
        >
          <div class="card h-100 border-0 shadow-sm hover-lift">
            <div class="card-body p-4">
              <div class="mb-3">
                <span class="badge bg-primary px-3 py-2 rounded-pill small"
                  >{{ activity.date.strftime('%d %b, %Y') }}</span
                >
              </div>
              <h5 class="card-title mb-3">{{ activity.title }}</h5>
              <p class="card-text text-muted">{{ activity.description }}</p>
            </div>
            <div class="card-footer bg-transparent border-0 pb-3 px-4">
              <a href="#" class="btn btn-sm btn-soft-primary px-3 rounded-pill show-activity" data-activity-id="{{ activity.id }}"
                >Learn More</a
              >
            </div>
          </div>
        </div>
        {% endfor %}
      {% else %}
      <div class="col-12">
        <div
          class="card border-0 shadow-sm p-4 text-center rounded-4 bg-soft-info"
        >
          <div class="card-body py-5">
            <i class="fas fa-puzzle-piece fa-3x text-info mb-3"></i>
            <h5>No activities available at the moment</h5>
            <p class="text-muted mb-0">
              Check back soon for engaging learning activities!
            </p>
          </div>
        </div>
      </div>
      {% endif %}
    </div>

    {% if total_activities > 6 %}
    <div class="text-center mt-5">
      <button id="load-more-activities" class="btn btn-outline-primary px-4 py-2 rounded-pill">
        Show More <i class="fas fa-angle-down ms-2"></i>
      </button>
    </div>
    {% endif %}
  </div>
</section>



<!-- Modals -->
<div class="modal fade" id="nutritionTipModal" tabindex="-1" aria-labelledby="nutritionTipModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content rounded-4 shadow">
      <div class="modal-header bg-soft-success border-0">
        <h5 class="modal-title" id="nutritionTipModalLabel">Nutrition Tip</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body" id="nutritionTipModalBody">
        <div class="text-center p-4">
          <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
        </div>
      </div>
      <div class="modal-footer border-0">
        <button type="button" class="btn btn-success" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="activityModal" tabindex="-1" aria-labelledby="activityModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content rounded-4 shadow">
      <div class="modal-header bg-soft-primary border-0">
        <h5 class="modal-title" id="activityModalLabel">Activity Details</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body" id="activityModalBody">
        <div class="text-center p-4">
          <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
        </div>
      </div>
      <div class="modal-footer border-0">
        <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

{% endblock %} {% block scripts %}
<script>
  document.addEventListener("DOMContentLoaded", function () {
    // Initialize Carousel with 5 second interval (5000ms)
    const homeCarousel = document.getElementById("homeCarousel");
    if (homeCarousel) {
      const carousel = new bootstrap.Carousel(homeCarousel, {
        interval: 5000, // 5 seconds
        wrap: true,
        keyboard: true,
        pause: "hover",
        touch: true,
      });
    }

    // Initialize AOS (Animate on Scroll)
    if (typeof AOS !== "undefined") {
      AOS.init({
        duration: 800,
        easing: "ease-in-out",
        once: true,
      });
    }

    // Add smooth scrolling to all links
    document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
      anchor.addEventListener("click", function (e) {
        e.preventDefault();

        const targetId = this.getAttribute("href");
        if (targetId === "#") return;

        const targetElement = document.querySelector(targetId);
        if (targetElement) {
          window.scrollTo({
            top: targetElement.offsetTop - 100,
            behavior: "smooth",
          });
        }
      });
    });

    // Add hover animations to cards
    document.querySelectorAll(".hover-lift").forEach((card) => {
      card.addEventListener("mouseenter", function () {
        this.style.transform = "translateY(-10px)";
        this.style.boxShadow = "0 15px 30px rgba(0,0,0,0.1)";
        this.style.transition = "all 0.3s ease";
      });

      card.addEventListener("mouseleave", function () {
        this.style.transform = "translateY(0)";
        this.style.boxShadow = "0 5px 15px rgba(0,0,0,0.05)";
        this.style.transition = "all 0.3s ease";
      });
    });

    // Show More functionality for Nutrition Tips
    const loadMoreTipsBtn = document.getElementById("load-more-tips");
    if (loadMoreTipsBtn) {
      loadMoreTipsBtn.addEventListener("click", function() {
        const hiddenTips = document.querySelectorAll(".nutrition-tip-card.d-none");
        let counter = 0;

        hiddenTips.forEach(card => {
          if (counter < 3) {
            card.classList.remove("d-none");
            card.classList.add("animate__fadeInUp");
            counter++;
          }
        });

        // Hide button if no more cards to show
        if (document.querySelectorAll(".nutrition-tip-card.d-none").length === 0) {
          loadMoreTipsBtn.style.display = "none";
        }
      });
    }

    // Show More functionality for Activities
    const loadMoreActivitiesBtn = document.getElementById("load-more-activities");
    if (loadMoreActivitiesBtn) {
      loadMoreActivitiesBtn.addEventListener("click", function() {
        const hiddenActivities = document.querySelectorAll(".activity-card.d-none");
        let counter = 0;

        hiddenActivities.forEach(card => {
          if (counter < 3) {
            card.classList.remove("d-none");
            card.classList.add("animate__fadeInUp");
            counter++;
          }
        });

        // Hide button if no more cards to show
        if (document.querySelectorAll(".activity-card.d-none").length === 0) {
          loadMoreActivitiesBtn.style.display = "none";
        }
      });
    }

    // Modal functionality for Nutrition Tips
    const showNutritionTipLinks = document.querySelectorAll('.show-nutrition-tip');
    showNutritionTipLinks.forEach(link => {
      link.addEventListener('click', function(e) {
        e.preventDefault();
        const tipId = this.dataset.tipId;
        
        fetch(`/api/nutrition-tips/${tipId}`)
          .then(response => {
            if (!response.ok) {
              throw new Error('Network response was not ok');
            }
            return response.json();
          })
          .then(data => {
            const modalBody = document.getElementById('nutritionTipModalBody');
            modalBody.innerHTML = `
              <div class="p-3">
                <h3 class="mb-3">${data.title}</h3>
                <p class="text-muted mb-3"><i class="far fa-calendar me-1"></i> ${data.date}</p>
                <div class="mt-3">${data.content}</div>
              </div>
            `;
            const nutritionTipModal = new bootstrap.Modal(document.getElementById('nutritionTipModal'));
            nutritionTipModal.show();
          })
          .catch(error => {
            console.error('Error fetching nutrition tip:', error);
            alert('Sorry, we could not load this nutrition tip. Please try again later.');
          });
      });
    });

    // Modal functionality for Activities
    const showActivityLinks = document.querySelectorAll('.show-activity');
    showActivityLinks.forEach(link => {
      link.addEventListener('click', function(e) {
        e.preventDefault();
        const activityId = this.dataset.activityId;
        
        fetch(`/api/activities/${activityId}`)
          .then(response => {
            if (!response.ok) {
              throw new Error('Network response was not ok');
            }
            return response.json();
          })
          .then(data => {
            const modalBody = document.getElementById('activityModalBody');
            modalBody.innerHTML = `
              <div class="p-3">
                <h3 class="mb-3">${data.title}</h3>
                <p class="text-muted mb-3"><i class="far fa-calendar me-1"></i> ${data.date}</p>
                <div class="mt-3">${data.description}</div>
              </div>
            `;
            const activityModal = new bootstrap.Modal(document.getElementById('activityModal'));
            activityModal.show();
          })
          .catch(error => {
            console.error('Error fetching activity:', error);
            alert('Sorry, we could not load this activity. Please try again later.');
          });
      });
    });
  });
</script>
{% endblock %}